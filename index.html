<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MockeX Dashboard</title>
<style>
body { background:#111; color:#0f0; font-family:monospace; text-align:center; padding:20px; }
button { padding:10px 20px; margin:10px; cursor:pointer; }
input { padding:5px; width:200px; }
#displayBox { border:1px solid #0f0; padding:10px; margin:10px auto; width:300px; min-height:50px; }
</style>
</head>
<body>
<h1>MockeX Proxy Dashboard</h1>

<button id="activateBtn">Activate Proxy</button>

<h2>IP & Port Display</h2>
<div id="displayBox">No active proxy</div>

<h2>Save Your UID</h2>
<input type="text" id="uidInput" placeholder="Enter UID e.g. 12484796465">
<button id="saveUidBtn">Save UID</button>

<h2>Login Simulation</h2>
<input type="text" id="loginUid" placeholder="Enter UID to login">
<button id="loginBtn">Login</button>

<script>
const backendURL = "http://127.0.0.1:5000"; // replace with deployed Python backend

const activateBtn = document.getElementById('activateBtn');
const displayBox = document.getElementById('displayBox');
const saveUidBtn = document.getElementById('saveUidBtn');
const uidInput = document.getElementById('uidInput');
const loginBtn = document.getElementById('loginBtn');
const loginUid = document.getElementById('loginUid');

// Activate proxy
activateBtn.addEventListener('click', async () => {
    const res = await fetch(`${backendURL}/activate`, { method:'POST' });
    const data = await res.json();
    updateDisplay();
});

// Save UID
saveUidBtn.addEventListener('click', async () => {
    const uid = uidInput.value;
    if(!uid) return alert("Enter UID");
    const res = await fetch(`${backendURL}/save-uid`, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ uid })
    });
    const data = await res.json();
    updateDisplay();
    alert(data.status);
});

// Login simulation
loginBtn.addEventListener('click', async () => {
    const uid = loginUid.value;
    if(!uid) return alert("Enter UID to login");
    const res = await fetch(`${backendURL}/login`, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ uid })
    });
    const data = await res.json();
    alert(data.status || data.error);
    updateDisplay();
});

// Update the display box
async function updateDisplay(){
    const res = await fetch(`${backendURL}/status`);
    const data = await res.json();
    let content = `Proxy Active: ${data.proxy_active}\nIP: ${data.ip}\nPort: ${data.port}\n\nUIDs:\n`;
    for(let uid in data.uids){
        content += `${uid} : ${data.uids[uid]}\n`;
    }
    displayBox.textContent = content;
}

// Auto refresh every 5 seconds
setInterval(updateDisplay, 5000);
</script>
</body>
</html>
